syntax = "proto3";

package traversium.moderation.textmoderation;

option java_multiple_files = true;
option java_package = "traversium.moderation.textmoderation";
option java_outer_classname = "TextModerationProto";

message ModerateTextRequest {
  string text = 1;
}

message CategoryResult {
  string category = 1;
  int32 severity  = 2;
}

message BlocklistHit {
  string blocklist_name = 1;
  string matched_text   = 2;
}

message ModerateTextResponse {
  bool allowed = 1;
  int32 max_severity = 2;
  repeated CategoryResult categories = 3;
  repeated BlocklistHit blocklist_hits = 4;
  string decision_reason = 5;
}

service TextModerationService {
  rpc ModerateText (ModerateTextRequest) returns (ModerateTextResponse);
}
